{
  "entities": {
    "Farmer": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Farmer",
      "type": "object",
      "description": "Represents a farmer in the Agro Visionaries application.",
      "properties": {
        "id": { "type": "string", "description": "Unique identifier for the farmer entity." },
        "name": { "type": "string", "description": "The name of the farmer." },
        "phone": { "type": "string", "description": "The farmer's phone number." },
        "aadhaar": { "type": "string", "description": "The farmer's Aadhaar number." },
        "address": { "type": "string", "description": "The farmer's full address." },
        "village": { "type": "string", "description": "The farmer's village." },
        "district": { "type": "string", "description": "The farmer's district." },
        "plots": {
          "type": "array",
          "description": "List of land plots owned by the farmer.",
          "items": {
            "type": "object",
            "properties": {
              "surveyNumber": { "type": "string" },
              "areaAcres": { "type": "number" },
              "landType": { "type": "string", "enum": ["Irrigated", "Unirrigated"] },
              "soilType": { "type": "string" }
            },
            "required": ["surveyNumber", "areaAcres", "landType", "soilType"]
          }
        },
        "devices": {
          "type": "array",
          "description": "Array of device IDs registered to the farmer.",
          "items": { "type": "string" }
        },
        "createdAt": { "type": "string", "format": "date-time" }
      },
      "required": ["id", "name", "phone", "aadhaar", "address", "village", "district", "plots", "devices", "createdAt"]
    },
    "Device": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Device",
      "type": "object",
      "description": "Represents a LoRaWAN device registered to a farmer.",
      "properties": {
        "id": { "type": "string", "description": "Unique identifier for the device (deviceId)." },
        "nickname": { "type": "string", "description": "A user-friendly name for the device." },
        "farmerId": { "type": "string", "description": "Reference to the Farmer document ID." },
        "location": {
          "type": "object",
          "properties": {
            "lat": { "type": "number" },
            "lng": { "type": "number" }
          },
          "required": ["lat", "lng"]
        },
        "jalkundMaxQuantity": { "type": "number", "description": "Maximum water capacity of the Jalkund in liters." },
        "surveyNumber": { "type": "string", "description": "The survey number of the plot this device is on." },
        "areaAcres": { "type": "number" },
        "landType": { "type": "string", "enum": ["Irrigated", "Unirrigated"] },
        "soilType": { "type": "string" },
        "createdAt": { "type": "string", "format": "date-time" }
      },
      "required": ["id", "nickname", "farmerId", "location", "jalkundMaxQuantity", "surveyNumber", "areaAcres", "landType", "soilType", "createdAt"]
    },
    "SensorData": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "SensorData",
      "type": "object",
      "description": "Represents sensor data collected from a device.",
      "properties": {
        "id": { "type": "string" },
        "deviceId": { "type": "string" },
        "timestamp": { "type": "string", "format": "date-time" },
        "waterLevel": { "type": "number" },
        "temperature": { "type": "number" },
        "moisture": { "type": "number" },
        "rain": { "type": "number" },
        "pumpState": { "type": "string", "enum": ["ON", "OFF"] }
      },
      "required": ["id", "deviceId", "timestamp", "waterLevel", "temperature", "moisture", "rain", "pumpState"]
    },
    "Alert": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Alert",
      "type": "object",
      "description": "Represents an alert generated by the system for a farmer.",
      "properties": {
        "id": { "type": "string" },
        "farmerId": { "type": "string" },
        "deviceId": { "type": "string" },
        "type": { "type": "string" },
        "message": { "type": "string" },
        "timestamp": { "type": "string", "format": "date-time" },
        "read": { "type": "boolean", "default": false }
      },
      "required": ["id", "farmerId", "deviceId", "type", "message", "timestamp", "read"]
    },
    "Admin": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Admin",
      "type": "object",
      "description": "Represents a government administrator user.",
      "properties": {
        "id": { "type": "string" },
        "email": { "type": "string", "format": "email" }
      },
      "required": ["id", "email"]
    },
    "FcmToken": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "FcmToken",
      "type": "object",
      "description": "Represents a Firebase Cloud Messaging (FCM) token for a farmer.",
      "properties": {
        "token": { "type": "string" },
        "farmerId": { "type": "string" }
      },
      "required": ["token", "farmerId"]
    }
  },
  "auth": {
    "providers": ["password", "phone"]
  },
  "firestore": {
    "structure": [
      { "path": "/farmers/{farmerId}", "definition": { "schema": { "$ref": "#/entities/Farmer" } } },
      { "path": "/devices/{deviceId}", "definition": { "schema": { "$ref": "#/entities/Device" } } },
      { "path": "/admins/{adminId}", "definition": { "schema": { "$ref": "#/entities/Admin" } } },
      { "path": "/alerts/{alertId}", "definition": { "schema": { "$ref": "#/entities/Alert" } } },
      { "path": "/sensorData/{sensorDataId}", "definition": { "schema": { "$ref": "#/entities/SensorData" } } },
      { "path": "/farmers/{farmerId}/fcmTokens/{token}", "definition": { "schema": { "$ref": "#/entities/FcmToken" } } }
    ]
  }
}
